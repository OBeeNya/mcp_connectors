{
  "scheme": "oauth2",
  "description": "eBay uses standard OAuth2 with two grant types. The correct flow depends on which API group you are calling.",
  "flows": {
    "client_credentials": {
      "description": "Returns an Application Token for non-seller APIs (Browse, Taxonomy). No user context.",
      "token_endpoint": "https://api.ebay.com/identity/v1/oauth2/token",
      "method": "POST",
      "authorization": "Basic Base64({client_id}:{client_secret})",
      "body": {
        "grant_type": "client_credentials",
        "scope": "https://api.ebay.com/oauth/api_scope"
      },
      "response": {
        "access_token": "v^1.1#...",
        "token_type": "Application Access Token",
        "expires_in": 7200
      },
      "token_ttl_seconds": 7200,
      "use_for": ["Browse API", "Taxonomy API"]
    },
    "authorization_code": {
      "description": "Returns a User Token for seller APIs (Inventory, Fulfillment, Account). Requires OAuth consent from the seller.",
      "step_1_auth_url": "https://auth.ebay.com/oauth2/authorize",
      "step_1_params": {
        "client_id": "{EBAY_CLIENT_ID}",
        "redirect_uri": "{EBAY_REDIRECT_URI}",
        "response_type": "code",
        "scope": "https://api.ebay.com/oauth/api_scope/sell.inventory https://api.ebay.com/oauth/api_scope/sell.fulfillment https://api.ebay.com/oauth/api_scope/sell.account"
      },
      "step_2_token_endpoint": "https://api.ebay.com/identity/v1/oauth2/token",
      "step_2_body": {
        "grant_type": "authorization_code",
        "code": "{authorization_code}",
        "redirect_uri": "{EBAY_REDIRECT_URI}"
      },
      "response": {
        "access_token": "v^1.1#...",
        "expires_in": 7200,
        "refresh_token": "v^1.1#...",
        "refresh_token_expires_in": 47304000
      },
      "access_token_ttl_seconds": 7200,
      "refresh_token_ttl_days": 548,
      "refresh_endpoint": "https://api.ebay.com/identity/v1/oauth2/token",
      "refresh_body": {
        "grant_type": "refresh_token",
        "refresh_token": "{EBAY_REFRESH_TOKEN}",
        "scope": "https://api.ebay.com/oauth/api_scope/sell.inventory https://api.ebay.com/oauth/api_scope/sell.fulfillment"
      },
      "use_for": ["Inventory API", "Fulfillment API", "Account API", "Analytics API"],
      "implementation_note": "Refresh tokens last ~18 months. Cache the access token and refresh proactively within 60 seconds of expiry."
    }
  },
  "required_headers": {
    "Authorization": "Bearer {access_token}",
    "Content-Type": "application/json",
    "X-EBAY-C-MARKETPLACE-ID": "{EBAY_MARKETPLACE_ID}"
  },
  "marketplace_ids": {
    "US": "EBAY_US",
    "UK": "EBAY_GB",
    "DE": "EBAY_DE",
    "FR": "EBAY_FR",
    "IT": "EBAY_IT",
    "ES": "EBAY_ES",
    "AU": "EBAY_AU",
    "CA": "EBAY_CA"
  },
  "required_env_vars": [
    "EBAY_CLIENT_ID",
    "EBAY_CLIENT_SECRET",
    "EBAY_REFRESH_TOKEN",
    "EBAY_REDIRECT_URI",
    "EBAY_MARKETPLACE_ID"
  ],
  "sandbox": {
    "base_url": "https://api.sandbox.ebay.com",
    "auth_url": "https://auth.sandbox.ebay.com/oauth2/authorize",
    "token_url": "https://api.sandbox.ebay.com/identity/v1/oauth2/token",
    "note": "Sandbox has completely separate credentials. Create sandbox keys at developer.ebay.com/my/keys and create sandbox seller accounts for testing."
  }
}
