{
  "scheme": "esa_basic",
  "description": "Rakuten RMS uses a custom 'ESA' (Easy Shopping API) authentication. Credentials are Base64-encoded as ServiceSecret:LicenseKey and passed in the Authorization header with the 'ESA' prefix — NOT 'Basic' or 'Bearer'.",
  "header": {
    "name": "Authorization",
    "format": "ESA {base64(serviceSecret:licenseKey)}",
    "example": "ESA dXNlcjpwYXNzd29yZA=="
  },
  "credential_construction": {
    "step_1": "Concatenate: {RAKUTEN_SERVICE_SECRET}:{RAKUTEN_LICENSE_KEY}",
    "step_2": "Base64-encode the concatenated string",
    "step_3": "Set header: Authorization: ESA {encoded_value}",
    "implementation_note": "Credentials do not expire. Re-encode on each request or cache the encoded value permanently."
  },
  "additional_headers": {
    "Content-Type": "application/json; charset=utf-8"
  },
  "shop_identification": {
    "description": "The shop URL is used as an identifier in most API paths.",
    "format": "shop_url is the shop's URL slug, e.g. 'myshop' for https://www.rakuten.co.jp/myshop/",
    "env_var": "RAKUTEN_SHOP_URL"
  },
  "required_env_vars": [
    "RAKUTEN_SERVICE_SECRET",
    "RAKUTEN_LICENSE_KEY",
    "RAKUTEN_SHOP_URL"
  ],
  "credential_source": {
    "where": "Rakuten RMS (Merchant Server) > Shop Settings > API Settings",
    "note": "ServiceSecret and LicenseKey are issued per shop. Each shop managed by your connector needs its own credentials."
  },
  "sandbox": {
    "available": false,
    "note": "No dedicated sandbox. Use a test shop account created via the Rakuten Partner Portal. Avoid publishing test products to real shop pages — use draft/inactive state.",
    "test_mode": "Some APIs accept a 'testMode' parameter to simulate without side effects. Check individual API docs."
  }
}
