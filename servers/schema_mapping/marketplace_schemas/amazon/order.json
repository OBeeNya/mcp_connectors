{
  "marketplace": "amazon",
  "entity": "Order",
  "source_endpoints": ["getOrders", "getOrderItems", "getOrderAddress"],
  "merge_strategy": "Call getOrders for the base order list. For each AmazonOrderId, call getOrderItems and getOrderAddress separately. Merge all three responses into a single dict keyed on AmazonOrderId before passing to the transformer.",
  "amount_format": "String — e.g. \"19.99\". Use str_to_decimal transformation.",
  "datetime_format": "ISO 8601 with Z suffix — e.g. \"2024-01-15T10:30:00Z\". Use datetime_iso transformation.",
  "fields": [
    {"name": "AmazonOrderId",                       "type": "string",  "source": "getOrders",   "required": true,  "example": "114-1234567-1234567"},
    {"name": "OrderStatus",                          "type": "string",  "source": "getOrders",   "required": true,  "values": ["Pending", "Unshipped", "PartiallyShipped", "Shipped", "Canceled", "Unfulfillable"]},
    {"name": "PurchaseDate",                         "type": "string",  "source": "getOrders",   "required": true,  "format": "ISO 8601"},
    {"name": "LastUpdateDate",                       "type": "string",  "source": "getOrders",   "required": true,  "format": "ISO 8601"},
    {"name": "OrderTotal.Amount",                    "type": "string",  "source": "getOrders",   "required": false, "note": "Absent for multi-item orders until fully placed"},
    {"name": "OrderTotal.CurrencyCode",              "type": "string",  "source": "getOrders",   "required": false, "example": "USD"},
    {"name": "FulfillmentChannel",                   "type": "string",  "source": "getOrders",   "required": false, "values": ["AFN", "MFN"], "note": "AFN = Amazon Fulfillment (FBA), MFN = Merchant"},
    {"name": "ShipmentServiceLevelCategory",         "type": "string",  "source": "getOrders",   "required": false, "example": "Standard"},
    {"name": "BuyerInfo.BuyerEmail",                 "type": "string",  "source": "getOrders",   "required": false, "note": "Only if seller has PII data access granted"},
    {"name": "BuyerInfo.BuyerName",                  "type": "string",  "source": "getOrders",   "required": false, "note": "Only if seller has PII data access granted"},
    {"name": "ShippingAddress.Name",                 "type": "string",  "source": "getOrderAddress", "required": false},
    {"name": "ShippingAddress.AddressLine1",         "type": "string",  "source": "getOrderAddress", "required": false},
    {"name": "ShippingAddress.AddressLine2",         "type": "string",  "source": "getOrderAddress", "required": false},
    {"name": "ShippingAddress.City",                 "type": "string",  "source": "getOrderAddress", "required": false},
    {"name": "ShippingAddress.StateOrRegion",        "type": "string",  "source": "getOrderAddress", "required": false},
    {"name": "ShippingAddress.PostalCode",           "type": "string",  "source": "getOrderAddress", "required": false},
    {"name": "ShippingAddress.CountryCode",          "type": "string",  "source": "getOrderAddress", "required": false, "example": "US"},
    {"name": "ShippingAddress.Phone",                "type": "string",  "source": "getOrderAddress", "required": false},
    {"name": "OrderItems[].ASIN",                    "type": "string",  "source": "getOrderItems",   "required": true},
    {"name": "OrderItems[].SellerSKU",               "type": "string",  "source": "getOrderItems",   "required": false, "note": "May be absent for merchant-fulfilled orders without SKU"},
    {"name": "OrderItems[].OrderItemId",             "type": "string",  "source": "getOrderItems",   "required": true},
    {"name": "OrderItems[].Title",                   "type": "string",  "source": "getOrderItems",   "required": false},
    {"name": "OrderItems[].QuantityOrdered",         "type": "integer", "source": "getOrderItems",   "required": true},
    {"name": "OrderItems[].QuantityShipped",         "type": "integer", "source": "getOrderItems",   "required": false},
    {"name": "OrderItems[].ItemPrice.Amount",        "type": "string",  "source": "getOrderItems",   "required": false, "note": "Total price for this line (unit_price * qty). Divide by QuantityOrdered for unit price."},
    {"name": "OrderItems[].ItemPrice.CurrencyCode",  "type": "string",  "source": "getOrderItems",   "required": false},
    {"name": "OrderItems[].ItemTax.Amount",          "type": "string",  "source": "getOrderItems",   "required": false},
    {"name": "OrderItems[].ShippingPrice.Amount",    "type": "string",  "source": "getOrderItems",   "required": false},
    {"name": "OrderItems[].PromotionDiscount.Amount","type": "string",  "source": "getOrderItems",   "required": false}
  ]
}
